<div class="container">
  <!-- Restaurant Info -->
  <div class="card mb-4">
    <div class="card-body">
      <h1><%= @restaurant.name %></h1>
      <p>
        <strong>Address:</strong> <%= @restaurant.address %><br>
        <strong>Phone:</strong> <%= @restaurant.phone_number %><br>
        <span class="badge bg-secondary"><%= @restaurant.category.capitalize %></span>
      </p>
    </div>
  </div>

  <!-- Reviews Section -->
  <div class="row">
    <div class="col-md-8">
      <h3>Reviews (<%= @restaurant.reviews.count %>)</h3>

      <% if @restaurant.reviews.any? %>
        <% @restaurant.reviews.each do |review| %>
          <div class="card mb-3">
            <div class="card-body">
              <div class="d-flex justify-content-between">
                <div>
                  <% review.rating.times do %>
                    <span class="text-warning">★</span>
                  <% end %>
                  <% (5 - review.rating).times do %>
                    <span class="text-muted">★</span>
                  <% end %>
                </div>
                <small class="text-muted"><%= review.created_at.strftime("%b %d, %Y") %></small>
              </div>
              <p class="mt-2"><%= review.content %></p>
            </div>
          </div>
        <% end %>
      <% else %>
        <p class="text-muted">No reviews yet. Be the first to review!</p>
      <% end %>
    </div>

    <!-- Review Form -->
    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h4>Add a Review</h4>
          <%= simple_form_for [@restaurant, @review] do |f| %>
            <%= f.input :rating,
                        collection: (0..5).to_a,
                        label: "Rating (0-5)",
                        prompt: "Select rating" %>
            <%= f.input :content,
                        as: :text,
                        placeholder: "Share your experience...",
                        input_html: { rows: 4 } %>
            <%= f.submit "Submit Review", class: "btn btn-primary w-100" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <%= link_to "Back to list", restaurants_path, class: "btn btn-link mt-3" %>
</div>
